{"filter":false,"title":"PostController.php","tooltip":"/blog/app/Http/Controllers/PostController.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":6,"column":0},"end":{"row":7,"column":20},"action":"insert","lines":["","use App\\Models\\Post;"],"id":664}],[{"start":{"row":5,"column":20},"end":{"row":6,"column":0},"action":"remove","lines":["",""],"id":665}],[{"start":{"row":6,"column":18},"end":{"row":6,"column":19},"action":"remove","lines":["t"],"id":666},{"start":{"row":6,"column":17},"end":{"row":6,"column":18},"action":"remove","lines":["s"]},{"start":{"row":6,"column":16},"end":{"row":6,"column":17},"action":"remove","lines":["o"]}],[{"start":{"row":6,"column":16},"end":{"row":6,"column":17},"action":"remove","lines":[";"],"id":667},{"start":{"row":6,"column":16},"end":{"row":6,"column":17},"action":"insert","lines":["d"]},{"start":{"row":6,"column":17},"end":{"row":6,"column":18},"action":"insert","lines":["f"]}],[{"start":{"row":6,"column":17},"end":{"row":6,"column":18},"action":"remove","lines":["f"],"id":668}],[{"start":{"row":6,"column":17},"end":{"row":6,"column":18},"action":"insert","lines":[";"],"id":669}],[{"start":{"row":6,"column":16},"end":{"row":6,"column":17},"action":"remove","lines":["d"],"id":670},{"start":{"row":6,"column":15},"end":{"row":6,"column":16},"action":"remove","lines":["P"]}],[{"start":{"row":6,"column":15},"end":{"row":6,"column":16},"action":"insert","lines":["C"],"id":671},{"start":{"row":6,"column":16},"end":{"row":6,"column":17},"action":"insert","lines":["o"]}],[{"start":{"row":6,"column":17},"end":{"row":6,"column":18},"action":"insert","lines":["m"],"id":672},{"start":{"row":6,"column":18},"end":{"row":6,"column":19},"action":"insert","lines":["e"]},{"start":{"row":6,"column":19},"end":{"row":6,"column":20},"action":"insert","lines":["n"]},{"start":{"row":6,"column":20},"end":{"row":6,"column":21},"action":"insert","lines":["t"]},{"start":{"row":6,"column":21},"end":{"row":6,"column":22},"action":"insert","lines":["s"]}],[{"start":{"row":57,"column":33},"end":{"row":57,"column":34},"action":"remove","lines":["m"],"id":673}],[{"start":{"row":57,"column":36},"end":{"row":57,"column":37},"action":"insert","lines":["s"],"id":674}],[{"start":{"row":55,"column":5},"end":{"row":58,"column":5},"action":"remove","lines":["public function comments()","    {","        return $this->hasMany(Coments::class);","    }"],"id":675},{"start":{"row":55,"column":4},"end":{"row":55,"column":5},"action":"remove","lines":[" "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":4},"action":"remove","lines":["    "]},{"start":{"row":54,"column":4},"end":{"row":55,"column":0},"action":"remove","lines":["",""]},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"remove","lines":["    "]},{"start":{"row":53,"column":5},"end":{"row":54,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":23,"column":4},"end":{"row":23,"column":8},"action":"remove","lines":["    "],"id":676},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"remove","lines":["    "]},{"start":{"row":22,"column":92},"end":{"row":23,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":23,"column":8},"end":{"row":23,"column":9},"action":"insert","lines":["/"],"id":677},{"start":{"row":23,"column":9},"end":{"row":23,"column":10},"action":"insert","lines":["/"]}],[{"start":{"row":24,"column":8},"end":{"row":24,"column":9},"action":"insert","lines":["/"],"id":678},{"start":{"row":24,"column":9},"end":{"row":24,"column":10},"action":"insert","lines":["/"]}],[{"start":{"row":24,"column":86},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":679},{"start":{"row":25,"column":0},"end":{"row":25,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":25,"column":8},"end":{"row":28,"column":80},"action":"insert","lines":[" // Postに関連するコメントを取得","    $comments = $post->comments; // post_id で自動的にフィルタリングされる","","    return view('posts.show')->with(['post' => $post, 'comments' => $comments]);"],"id":680}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "],"id":681}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"insert","lines":["    "],"id":682}],[{"start":{"row":26,"column":63},"end":{"row":27,"column":0},"action":"remove","lines":["",""],"id":683}],[{"start":{"row":32,"column":5},"end":{"row":33,"column":0},"action":"insert","lines":["",""],"id":684},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]},{"start":{"row":33,"column":4},"end":{"row":34,"column":0},"action":"insert","lines":["",""]},{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":34,"column":4},"end":{"row":41,"column":5},"action":"insert","lines":["public function increaseRating(Post $post)","    {","        // high_rating を1増加させる","        $post->increment('high_rating');","","        // 投稿詳細ページにリダイレクト","        return redirect()->route('posts.show', $post->id)->with('success', 'Rating increased!');","    }"],"id":685}],[{"start":{"row":25,"column":28},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":686},{"start":{"row":26,"column":0},"end":{"row":26,"column":9},"action":"insert","lines":["         "]}],[{"start":{"row":26,"column":9},"end":{"row":26,"column":28},"action":"insert","lines":["dd($post); // デバッグ用"],"id":687}],[{"start":{"row":26,"column":8},"end":{"row":26,"column":9},"action":"remove","lines":[" "],"id":688}],[{"start":{"row":26,"column":8},"end":{"row":26,"column":9},"action":"insert","lines":["/"],"id":689},{"start":{"row":26,"column":9},"end":{"row":26,"column":10},"action":"insert","lines":["/"]}],[{"start":{"row":41,"column":96},"end":{"row":42,"column":0},"action":"insert","lines":["",""],"id":690},{"start":{"row":42,"column":0},"end":{"row":42,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":42,"column":8},"end":{"row":43,"column":0},"action":"insert","lines":["return redirect()->route('posts.show', ['post' => $post->id])->with('success', 'Rating increased!');",""],"id":691}],[{"start":{"row":41,"column":8},"end":{"row":41,"column":9},"action":"insert","lines":["/"],"id":692},{"start":{"row":41,"column":9},"end":{"row":41,"column":10},"action":"insert","lines":["/"]}],[{"start":{"row":38,"column":8},"end":{"row":38,"column":9},"action":"insert","lines":["/"],"id":693},{"start":{"row":38,"column":9},"end":{"row":38,"column":10},"action":"insert","lines":["/"]}],[{"start":{"row":38,"column":42},"end":{"row":39,"column":0},"action":"insert","lines":["",""],"id":694},{"start":{"row":39,"column":0},"end":{"row":39,"column":8},"action":"insert","lines":["        "]},{"start":{"row":39,"column":8},"end":{"row":40,"column":0},"action":"insert","lines":["",""]},{"start":{"row":40,"column":0},"end":{"row":40,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":40,"column":8},"end":{"row":43,"column":35},"action":"insert","lines":["// high_rating を1増加させる","    DB::table('posts')","        ->where('id', $post->id)","        ->increment('high_rating');"],"id":695}],[{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "],"id":696}],[{"start":{"row":42,"column":4},"end":{"row":42,"column":8},"action":"insert","lines":["    "],"id":697}],[{"start":{"row":43,"column":8},"end":{"row":43,"column":12},"action":"insert","lines":["    "],"id":698}],[{"start":{"row":9,"column":24},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":699}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":34},"action":"insert","lines":["use Illuminate\\Support\\Facades\\DB;"],"id":700}],[{"start":{"row":44,"column":39},"end":{"row":45,"column":0},"action":"insert","lines":["",""],"id":701},{"start":{"row":45,"column":0},"end":{"row":45,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":42,"column":8},"end":{"row":42,"column":9},"action":"insert","lines":["/"],"id":702},{"start":{"row":42,"column":9},"end":{"row":42,"column":10},"action":"insert","lines":["*"]}],[{"start":{"row":45,"column":8},"end":{"row":45,"column":9},"action":"insert","lines":["/"],"id":703}],[{"start":{"row":45,"column":8},"end":{"row":45,"column":9},"action":"insert","lines":["*"],"id":704}],[{"start":{"row":45,"column":10},"end":{"row":45,"column":14},"action":"remove","lines":["    "],"id":705},{"start":{"row":45,"column":10},"end":{"row":46,"column":0},"action":"insert","lines":["",""]},{"start":{"row":46,"column":0},"end":{"row":46,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":46,"column":8},"end":{"row":54,"column":7},"action":"insert","lines":["DB::table('posts')->insert([","        'title' => $post->title,","        'body' => $post->body,","        'user_id' => $post->user_id,","        'category_id' => $post->category_id,","        'high_rating' => $post->high_rating + 1, // 既存の high_rating に 1 を追加","        'created_at' => now(),","        'updated_at' => now(),","    ]);"],"id":706}],[{"start":{"row":54,"column":5},"end":{"row":54,"column":8},"action":"insert","lines":["   "],"id":707}],[{"start":{"row":54,"column":7},"end":{"row":54,"column":8},"action":"remove","lines":[" "],"id":708},{"start":{"row":54,"column":6},"end":{"row":54,"column":7},"action":"remove","lines":[" "]},{"start":{"row":54,"column":5},"end":{"row":54,"column":6},"action":"remove","lines":[" "]}],[{"start":{"row":54,"column":4},"end":{"row":54,"column":8},"action":"insert","lines":["    "],"id":709}],[{"start":{"row":53,"column":8},"end":{"row":53,"column":12},"action":"insert","lines":["    "],"id":710}],[{"start":{"row":52,"column":8},"end":{"row":52,"column":12},"action":"insert","lines":["    "],"id":711}],[{"start":{"row":52,"column":8},"end":{"row":52,"column":12},"action":"insert","lines":["    "],"id":712}],[{"start":{"row":52,"column":8},"end":{"row":52,"column":12},"action":"remove","lines":["    "],"id":713}],[{"start":{"row":51,"column":8},"end":{"row":51,"column":12},"action":"insert","lines":["    "],"id":714}],[{"start":{"row":50,"column":8},"end":{"row":50,"column":12},"action":"insert","lines":["    "],"id":715}],[{"start":{"row":49,"column":8},"end":{"row":49,"column":12},"action":"insert","lines":["    "],"id":716}],[{"start":{"row":48,"column":8},"end":{"row":48,"column":12},"action":"insert","lines":["    "],"id":717}],[{"start":{"row":47,"column":8},"end":{"row":47,"column":12},"action":"insert","lines":["    "],"id":718}],[{"start":{"row":46,"column":8},"end":{"row":54,"column":11},"action":"remove","lines":["DB::table('posts')->insert([","            'title' => $post->title,","            'body' => $post->body,","            'user_id' => $post->user_id,","            'category_id' => $post->category_id,","            'high_rating' => $post->high_rating + 1, // 既存の high_rating に 1 を追加","            'created_at' => now(),","            'updated_at' => now(),","        ]);"],"id":719}],[{"start":{"row":46,"column":8},"end":{"row":51,"column":11},"action":"insert","lines":["DB::table('posts')","        ->where('id', $post->id)","        ->update([","            'high_rating' => $post->high_rating + 1,","            'updated_at' => now(), // 更新日時を変更する","        ]);"],"id":720}],[{"start":{"row":5,"column":20},"end":{"row":6,"column":35},"action":"insert","lines":["","use App\\Models\\RankScore; // モデルを追加"],"id":721}],[{"start":{"row":33,"column":5},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":723},{"start":{"row":34,"column":0},"end":{"row":34,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":34,"column":8},"end":{"row":34,"column":28},"action":"insert","lines":["dd($request->all());"],"id":724}],[{"start":{"row":34,"column":8},"end":{"row":34,"column":28},"action":"remove","lines":["dd($request->all());"],"id":725}],[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"remove","lines":["    "],"id":726},{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"remove","lines":["    "]},{"start":{"row":33,"column":5},"end":{"row":34,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":33,"column":5},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":727},{"start":{"row":34,"column":0},"end":{"row":34,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":34,"column":8},"end":{"row":35,"column":35},"action":"insert","lines":["$categories = $category->all();","    dd($categories); // カテゴリーの内容を表示"],"id":728}],[{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"insert","lines":["    "],"id":729}],[{"start":{"row":32,"column":4},"end":{"row":37,"column":5},"action":"remove","lines":["public function create(Category $category)","    {","        $categories = $category->all();","        dd($categories); // カテゴリーの内容を表示","        return view('posts.create')->with(['categories' => $category->get()]);","    }"],"id":730}],[{"start":{"row":32,"column":4},"end":{"row":37,"column":0},"action":"insert","lines":["public function create(Category $category)","{","    $categories = $category->all(); // インスタンスからデータを取得しようとする","    return view('posts.create')->with(['categories' => $categories]);","}",""],"id":731}],[{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "],"id":732}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":8},"action":"insert","lines":["    "],"id":733}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":8},"action":"remove","lines":["    "],"id":734}],[{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"insert","lines":["    "],"id":735}],[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"insert","lines":["    "],"id":736}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "],"id":737}],[{"start":{"row":34,"column":63},"end":{"row":35,"column":0},"action":"insert","lines":["",""],"id":738},{"start":{"row":35,"column":0},"end":{"row":35,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":35,"column":8},"end":{"row":35,"column":24},"action":"insert","lines":["dd($categories);"],"id":739}],[{"start":{"row":35,"column":8},"end":{"row":36,"column":8},"action":"remove","lines":["dd($categories);","        "],"id":745}],[{"start":{"row":32,"column":4},"end":{"row":36,"column":5},"action":"remove","lines":["public function create(Category $category)","    {","        $categories = $category->all(); // インスタンスからデータを取得しようとする","        return view('posts.create')->with(['categories' => $categories]);","    }"],"id":746}],[{"start":{"row":32,"column":4},"end":{"row":38,"column":0},"action":"insert","lines":["public function create()","{","    // 全てのカテゴリを取得","    $categories = Category::all();","    return view('posts.create')->with(['categories' => $categories]);","}",""],"id":747}],[{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "],"id":748}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":8},"action":"insert","lines":["    "],"id":749}],[{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"insert","lines":["    "],"id":750}],[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"insert","lines":["    "],"id":751}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "],"id":752}],[{"start":{"row":32,"column":4},"end":{"row":37,"column":5},"action":"remove","lines":["public function create()","    {","        // 全てのカテゴリを取得","        $categories = Category::all();","        return view('posts.create')->with(['categories' => $categories]);","    }"],"id":753}],[{"start":{"row":32,"column":4},"end":{"row":38,"column":1},"action":"insert","lines":["public function create()","{","    // 全てのカテゴリを取得","    $categories = Category::all();","    dd($categories); // デバッグ用、ここで取得したカテゴリを表示","    return view('posts.create')->with(['categories' => $categories]);","}"],"id":754}],[{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"insert","lines":["    "],"id":755}],[{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "],"id":756}],[{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "],"id":757}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"insert","lines":["    "],"id":758}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"insert","lines":["    "],"id":759}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "],"id":760}],[{"start":{"row":32,"column":4},"end":{"row":38,"column":5},"action":"remove","lines":["public function create()","    {","        // 全てのカテゴリを取得","        $categories = Category::all();","        dd($categories); // デバッグ用、ここで取得したカテゴリを表示","        return view('posts.create')->with(['categories' => $categories]);","    }"],"id":761}],[{"start":{"row":32,"column":4},"end":{"row":38,"column":0},"action":"insert","lines":["public function create(Category $category)","{","    $categories = $category->all();","    dd($categories); // カテゴリーの内容を表示","    return view('posts.create')->with(['categories' => $categories]);","}",""],"id":762}],[{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "],"id":763}],[{"start":{"row":36,"column":4},"end":{"row":36,"column":8},"action":"insert","lines":["    "],"id":764}],[{"start":{"row":35,"column":4},"end":{"row":35,"column":8},"action":"insert","lines":["    "],"id":765}],[{"start":{"row":34,"column":4},"end":{"row":34,"column":8},"action":"insert","lines":["    "],"id":766}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "],"id":767}],[{"start":{"row":35,"column":8},"end":{"row":35,"column":9},"action":"insert","lines":["$"],"id":768}],[{"start":{"row":35,"column":8},"end":{"row":35,"column":9},"action":"remove","lines":["$"],"id":769}],[{"start":{"row":35,"column":8},"end":{"row":35,"column":9},"action":"insert","lines":["#"],"id":770}]]},"ace":{"folds":[],"scrolltop":687.6000000000007,"scrollleft":0,"selection":{"start":{"row":66,"column":5},"end":{"row":66,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1728215562242,"hash":"5ef76f8d3ced2926e1f22ce696e1f2229200951c"}